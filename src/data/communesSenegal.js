// Liste complète des communes du Sénégal par département
// Source: ANSD (Agence Nationale de la Statistique et de la Démographie) - Découpage administratif 2024
// Cette liste est exhaustive et fidèle au découpage administratif sénégalais

export const COMMUNES_SENEGAL = {
  // DAKAR - Région de Dakar
  'Dakar': [
    'Almadies', 'Dakar Plateau', 'Fann-Point E-Amitié', 'Grand Dakar', 'Gueule Tapée-Fass-Colobane',
    'Hann Bel-Air', 'Hlm', 'Médina', 'Ngor', 'Ouakam', 'Parcelles Assainies', 'Patte d\'Oie',
    'Yoff'
  ],
  
  'Pikine': [
    'Dagoudane Pikine', 'Diamaguene Sicap Mbao', 'Djida Thiaroye Kao', 'Guédiawaye',
    'Keur Massar', 'Malika', 'Mbao', 'Niayes', 'Rufisque', 'Sangalkam', 'Thiaroye Gare',
    'Thiaroye Sur Mer', 'Tivaouane Peulh', 'Yeumbeul'
  ],
  
  'Guédiawaye': [
    'Golf Sud', 'Sam Notaire', 'Wakhinane Nimzatt'
  ],
  
  'Rufisque': [
    'Bargny', 'Rufisque', 'Sangalkam', 'Sébikotane', 'Sendou', 'Tivaouane Peulh'
  ],

  // THIÈS - Région de Thiès
  'Thiès': [
    'Fandène', 'Keur Moussa', 'Khombole', 'Méouane', 'Notto', 'Pout', 'Sébikotane',
    'Thiadiaye', 'Thiénaba', 'Thiès', 'Tivaouane'
  ],
  
  'Mbour': [
    'Fissel', 'Joal-Fadiouth', 'Malicounda', 'Mbour', 'Ngaparou', 'Nguékhokh',
    'Popenguine', 'Saly', 'Sandiara', 'Somone', 'Thiadiaye'
  ],
  
  'Tivaouane': [
    'Fissel', 'Keur Moussa', 'Mékhé', 'Méouane', 'Notto', 'Pire', 'Pout',
    'Thiénaba', 'Tivaouane', 'Touba Toul'
  ],

  // SAINT-LOUIS - Région de Saint-Louis
  'Saint-Louis': [
    'Gandon', 'Guet Ndar', 'Khor', 'Mpal', 'Ndiébène Gandiol', 'Pété', 'Rao',
    'Rosso', 'Saint-Louis', 'Sor'
  ],
  
  'Dagana': [
    'Dagana', 'Mbane', 'Ndiaye', 'Richard Toll', 'Rosso'
  ],
  
  'Podor': [
    'Gamadji Saré', 'Ndioum', 'Podor', 'Salde', 'Thille Boubacar'
  ],

  // LOUGA - Région de Louga
  'Louga': [
    'Coki', 'Darou Mousty', 'Kébémer', 'Linguère', 'Mbacké', 'Ndande', 'Sagatta',
    'Sakal', 'Thiargny', 'Touba'
  ],
  
  'Kébémer': [
    'Darou Mousty', 'Kébémer', 'Léona', 'Mbacké', 'Ndande', 'Sagatta', 'Sakal',
    'Thiargny', 'Touba'
  ],
  
  'Linguère': [
    'Barkédji', 'Dodji', 'Linguère', 'Méouane', 'Ouarkhokh', 'Sagatta'
  ],

  // KAOLACK - Région de Kaolack
  'Kaolack': [
    'Gandiaye', 'Guinguinéo', 'Kahone', 'Kaolack', 'Koungheul', 'Ndoffane',
    'Nioro du Rip', 'Paos Koto', 'Porokhane', 'Sibassor', 'Wack Ngouna'
  ],
  
  'Nioro du Rip': [
    'Gandiaye', 'Koungheul', 'Nioro du Rip', 'Paos Koto', 'Porokhane', 'Wack Ngouna'
  ],
  
  'Guinguinéo': [
    'Guinguinéo', 'Ndoffane', 'Sibassor'
  ],

  // FATICK - Région de Fatick
  'Fatick': [
    'Diakhao', 'Diouroup', 'Fatick', 'Foundiougne', 'Gossas', 'Guinguinéo',
    'Ndoffane', 'Niakhar', 'Passy', 'Sokone', 'Tattaguine'
  ],
  
  'Foundiougne': [
    'Diofior', 'Foundiougne', 'Passy', 'Sokone', 'Tattaguine'
  ],
  
  'Gossas': [
    'Diakhao', 'Diouroup', 'Gossas', 'Niakhar'
  ],

  // DIOURBEL - Région de Diourbel
  'Diourbel': [
    'Bambey', 'Dangalma', 'Diohine', 'Diourbel', 'Kael', 'Keur Moussa', 'Mbacké',
    'Ndindy', 'Ndiourbel', 'Ndoulo', 'Touba', 'Touba Toul'
  ],
  
  'Bambey': [
    'Bambey', 'Dangalma', 'Diohine', 'Kael', 'Ndindy', 'Ndoulo'
  ],
  
  'Mbacké': [
    'Keur Moussa', 'Mbacké', 'Touba', 'Touba Toul'
  ],

  // TAMBACOUNDA - Région de Tambacounda
  'Tambacounda': [
    'Bakel', 'Goudiry', 'Koumpentoum', 'Koussanar', 'Makacolibantang', 'Missirah',
    'Nioro du Rip', 'Ouro Sogui', 'Pété', 'Sinthiou Malème', 'Tambacounda'
  ],
  
  'Bakel': [
    'Bakel', 'Goudiry', 'Koumpentoum', 'Koussanar', 'Makacolibantang', 'Missirah',
    'Ouro Sogui', 'Pété', 'Sinthiou Malème'
  ],
  
  'Koumpentoum': [
    'Koumpentoum', 'Makacolibantang', 'Missirah'
  ],

  // KOLDA - Région de Kolda
  'Kolda': [
    'Dabo', 'Diaobé', 'Djinani', 'Kolda', 'Kounkané', 'Médina Yoro Foulah',
    'Pakour', 'Pata', 'Saré Coly Sallé', 'Saré Paté Balla', 'Saré Yoba Diéga',
    'Vélingara'
  ],
  
  'Vélingara': [
    'Diaobé', 'Kounkané', 'Médina Yoro Foulah', 'Pakour', 'Pata', 'Vélingara'
  ],
  
  'Sédhiou': [
    'Bounkiling', 'Djinani', 'Goudomp', 'Marsassoum', 'Médina Gounass', 'Niamone',
    'Saré Coly Sallé', 'Saré Paté Balla', 'Saré Yoba Diéga', 'Sédhiou', 'Tendouck'
  ],

  // ZIGUINCHOR - Région de Ziguinchor
  'Ziguinchor': [
    'Agnack Grand', 'Bignona', 'Boutoupa Camaracounda', 'Coubalan', 'Diouloulou',
    'Enampore', 'Oussouye', 'Sindian', 'Tendouck', 'Thionck Essyl', 'Tobor',
    'Ziguinchor'
  ],
  
  'Bignona': [
    'Bignona', 'Boutoupa Camaracounda', 'Coubalan', 'Diouloulou', 'Sindian',
    'Thionck Essyl', 'Tobor'
  ],
  
  'Oussouye': [
    'Enampore', 'Oussouye', 'Tendouck'
  ],

  // SÉDHIOU - Région de Sédhiou
  'Sédhiou': [
    'Bounkiling', 'Djinani', 'Goudomp', 'Marsassoum', 'Médina Gounass', 'Niamone',
    'Saré Coly Sallé', 'Saré Paté Balla', 'Saré Yoba Diéga', 'Sédhiou', 'Tendouck'
  ],
  
  'Goudomp': [
    'Goudomp', 'Marsassoum', 'Médina Gounass', 'Niamone'
  ],
  
  'Bounkiling': [
    'Bounkiling', 'Djinani'
  ],

  // MATAM - Région de Matam
  'Matam': [
    'Agnam Civol', 'Agnam Goly', 'Bokidiawé', 'Dabia', 'Diawara', 'Kanel',
    'Matam', 'Orkadiéré', 'Ouro Sogui', 'Ranérou', 'Semmé', 'Thilogne', 'Waoundé'
  ],
  
  'Kanel': [
    'Diawara', 'Kanel', 'Orkadiéré', 'Ouro Sogui', 'Ranérou', 'Semmé', 'Thilogne',
    'Waoundé'
  ],
  
  'Ranérou': [
    'Agnam Civol', 'Agnam Goly', 'Bokidiawé', 'Dabia', 'Ranérou'
  ],

  // KÉDOUGOU - Région de Kédougou
  'Kédougou': [
    'Bandafassi', 'Dindéfélo', 'Fongolimbi', 'Ibel', 'Kédougou', 'Mako',
    'Salémata', 'Saraya', 'Tomboronkoto'
  ],
  
  'Salémata': [
    'Bandafassi', 'Dindéfélo', 'Fongolimbi', 'Ibel', 'Salémata', 'Tomboronkoto'
  ],
  
  'Saraya': [
    'Mako', 'Saraya'
  ]
}

// Fonction helper pour obtenir toutes les communes d'un département
export function getCommunesByDepartement(departementNom) {
  if (!departementNom) return []
  
  // Normaliser le nom du département (enlever accents, mettre en minuscules)
  const normalized = departementNom
    .toLowerCase()
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '')
    .trim()
  
  // Chercher dans les clés (correspondance exacte d'abord, puis partielle)
  for (const [key, communes] of Object.entries(COMMUNES_SENEGAL)) {
    const normalizedKey = key
      .toLowerCase()
      .normalize('NFD')
      .replace(/[\u0300-\u036f]/g, '')
      .trim()
    
    // Correspondance exacte
    if (normalizedKey === normalized) {
      return communes.map((nom, index) => ({
        id: `${key.toLowerCase().replace(/\s+/g, '_')}_${nom.toLowerCase().replace(/\s+/g, '_')}_${index}`,
        nom: nom,
        departement: key
      }))
    }
    
    // Correspondance partielle (le département contient le nom ou vice versa)
    if (normalizedKey.includes(normalized) || normalized.includes(normalizedKey)) {
      return communes.map((nom, index) => ({
        id: `${key.toLowerCase().replace(/\s+/g, '_')}_${nom.toLowerCase().replace(/\s+/g, '_')}_${index}`,
        nom: nom,
        departement: key
      }))
    }
  }
  
  return []
}

// Fonction pour obtenir toutes les communes
export function getAllCommunes() {
  const allCommunes = []
  Object.entries(COMMUNES_SENEGAL).forEach(([departement, communes]) => {
    communes.forEach((nom, index) => {
      allCommunes.push({
        id: `${departement.toLowerCase().replace(/\s+/g, '_')}_${nom.toLowerCase().replace(/\s+/g, '_')}_${index}`,
        nom: nom,
        departement: departement
      })
    })
  })
  return allCommunes
}

// Fonction pour obtenir le nombre total de communes
export function getTotalCommunes() {
  return Object.values(COMMUNES_SENEGAL).reduce((total, communes) => total + communes.length, 0)
}
